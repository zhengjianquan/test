<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>大家</title>
	<script src="js/flexible.js"></script><!-- rem布局 -->
<!-- 	<link rel="stylesheet" type="text/csscss" href="css/style1.css"> -->
	<script src="js/jquery.js"></script>  <!-- jquery,操作页面上html元素 -->
	<script src="js/velocity.js"></script> <!-- 动画库 -->
	<script src="js/velocity.ui.js"></script><!-- 动画库 -->
	<link rel="stylesheet/less" type="text/csscss" href="css/style.less">
	<script src="js/less.min.js" type="text/javascript"></script>
</head>
<body>
	<div class="loading">
		<div class="text">建议在WIFI下观看，正在加载中...</div>
		<div class="progress">0%</div>
		<div class="copyright">出品：xxx公司出品</div>
	</div>
	<div class = "cover">
		<div class = "text"></div>
	</div>
	<div class="wrap">
		<div class="choose">
		<div class="txt"></div>
	
			<a href="#" class="choose_boy"></a>
			<a href="#" class="choose_girl"></a>
		
		</div>
		<div class="main">
			<div class="share-btn"></div>			
					
			<div class="floor"></div>
			<div class="main-zhong"></div>
			<div class="main-zhi"></div>
			<div class="person"></div>
			<div class="desk"></div>
			<div class="main-rui"></div>
			<div class="main-wen"></div>
			<div class="main-xing"></div>
			<div class="btns">
				<div class="zhong  ac_btn" data-daoju="zhong"></div>
				<div class="zhi ac_btn" data-daoju="zhi"></div>
				<div class="wen ac_btn" data-daoju="wen"></div>
				<div class="xing ac_btn" data-daoju="xing"></div>
				<div class="rui ac_btn" data-daoju="rui"></div>
				<div class="renwu ac_btn" data-daoju="renwu"></div>
			</div>
			<div class="leaf1"></div>
			<div class="leaf2"></div>
			<div class="leaf3"></div>
			<div class="fenghao">白身</div>			
			<div class="sharebg"></div>
			<div class="share"></div>
			<div class="tips1"></div>
			<div class="tips2"></div>
			<div class="tips3"></div>
			<div class="tips4"></div>
		</div>
		<div class="answer">
			
				<div class="title">关于黄圣依与扬子的感情，以下哪种观点没有在《大家》提起过？</div>
				<div class="result-options">
					<div class="opt">
						<span>A:选项a</span>
						<div class="animation-correct"></div>
						<div class="animation-wrong"></div>
					</div>
				<div class="opt">
						<span>A:选项a</span>
						<div class="animation-correct"></div>
						<div class="animation-wrong"></div>
					</div>
				<div class="opt">
						<span>A:选项a</span>
						<div class="animation-correct"></div>
						<div class="animation-wrong"></div>
					</div>
				</div>
				<div class="num-count"></div>
				<div class="result">
					<div class="result-wrap">
						<div class="result-title">解锁成功</div>
						<div class="result-flag"></div>
						<div class="result-text">获得猫咪</div>
					</div>
				
				</div>
				<div class="result-wrong">
					<div class="result-wrap">
						<div class="result-title">解锁失败</div>
						<div class="result-wrong-text">您与道具擦肩而过，再试一次吧！</div>
					</div>
				
				</div>				
				<div class="result-person">
					<div class="result-person-wrap">
						<div class="result-person-title">答对四题</div>
						<div class="reuslt-person-subtitle">恭喜你，人物形象升级为</div>
						<div class="reuslt-person-text">贵妃</div>
					</div>

				</div>

		</div>
	</div>
	
	<script type="text/javascript">
		var pic = ['css/answer_allopen_bg.png','css/answer_bg.png','css/answer_cat.png','css/answer_correct.png','css/answer_failed_bg.png','css/answer_rui.png','css/answer_success_bg.png','css/answer_wen.png','css/answer_wrong.png','css/answer_zhi.png','css/answer_zhong.png','css/btn-boy.png','css/btn-girl.png','css/choose_bg.png','css/choose_boy.png','css/choose_girl.png','css/choose-bg.png','css/choose-text.png','css/cover_bg.png','css/cover_clou1.png','css/cover_clou2.png','css/cover_clou3.png','css/cover_clou4.png','css/cover_text.png','css/cover-bg.png','css/cover-text.png','css/floor.jpg','css/leaf1.png','css/leaf2.png','css/leaf3.png','css/loading.jpg','css/loading_bg.png','css/loading_cloud.png','css/logo.png','css/mainscene_bg.png','css/mainscene_rui.png','css/mainscene_rui_bi.png','css/mainscene_table.png','css/mainscene_tips1.png','css/mainscene_tips2.png','css/mainscene_tips3.png','css/mainscene_tips4.png','css/mainscene_upgrade.png','css/mainscene_wen.png','css/mainscene_wen_zhi.png','css/mainscene_xing.png','css/mainscene_xing_cat.png','css/mainscene_zhi.png','css/mainscene_zhi_hua.png','css/mainscene_zhong.png','css/mainscene_zhong_bian.png','css/me_bottom.png','css/me_close.png','css/memorial_1.png','css/memorial_2.png','css/memorial_3.png','css/memorial_4.png','css/memorial_bg.png','css/memorial_up_btn.png','css/ms_chakanzouzhang.png','css/ms_taijian.png','css/p8.png','css/picture.txt','css/pop_renwu_bg.png','css/share.jpg','css/share.png','css/share_btn.png','css/upgrade_btn.png']
		var count = 0
		for (var i = 0; i < pic.length; i++) {
		var img = new Image();
		img.src = pic[count];
		img.onload = function(){
			count++;
			var progress = Math.floor(count/pic.length*100);
			$('.progress').text(progress+'%');
			if (count == i){
			$('.loading').hide();
			$('.cover').velocity('fadeIn',{complete:function(){
					var $t = $(this);
					$t.velocity('fadeOut',{complete:function(){
						$('.choose').show()
					},delay:9000})
				}});	
			// setTimeout(function(){
			// 	$('.cover').hide();
				
			// },9000);
				}
			}
		}
	
function ruchang(){
	$('.tips1').velocity('fadeIn')
	$('.tips2').velocity('fadeIn')
	$('.tips3').velocity('fadeIn')
	$('.tips4').velocity('fadeIn')
	$('.sharebg').velocity('fadeIn')
	$('.tips2')
    .velocity("slideUp", { duration: 500 })
    .velocity("slideDown", {duration: 500 })
    .velocity("slideUp", { duration: 500 })
    .velocity("slideDown", {duration: 500 })
    .velocity("slideUp", { duration: 500 })
    .velocity("slideDown", {duration: 500 });
    $('.tips4')
    .velocity({ top: 1191 }, { duration: 500 })
    .velocity("reverse", { duration: 500 })
    .velocity({ top: 1191 }, { duration: 500 })
    .velocity("reverse", { duration: 500 })
    .velocity({ top: 1191 }, { duration: 500 })
    .velocity("reverse", { duration: 500 });
	$('.sharebg').velocity('fadeOut',{complete:function(){
	$('.tips1').velocity('fadeOut');
	$('.tips2').velocity('fadeOut');
	$('.tips3').velocity('fadeOut');
	$('.tips4').velocity('fadeOut');
		},delay:3000});
}


function leafs1(){

	$('.leaf1').velocity('fadeIn',{complete:function(){

	$('.leaf1').velocity({
			translateY: "5rem",translateX: "1rem",opacity:0},
    		{duration:20000}
		);
	$('.leaf1').velocity("reverse", { duration: 1 });
leafs1();
}});

}

function leafs2(){

	$('.leaf2').velocity('fadeIn',{complete:function(){

	$('.leaf2').velocity({
			translateY: "8rem",translateX: "1.6rem",opacity:0},
    		{duration:27000}
		);
	$('.leaf2').velocity("reverse", { duration: 1 });
leafs2();
}});
				

}


function leafs3(){

	$('.leaf3').velocity('fadeIn',{complete:function(){

	$('.leaf3').velocity({
			translateY: "6rem",translateX: "1.2rem",opacity:0},
    		{duration:23000}
		);
	$('.leaf3').velocity("reverse", { duration: 1 });
leafs3();
}});

}


	
	


		$('.choose_boy').on('click',function(){
			xingxiang = xingxiangnan;
			zhiwei = zhiweinan;
		$('.person').addClass('boy');
		$('.wrap').css({transform:'translateY('+-$(window).height()+'px)'})
		leafs1()
		leafs2()
		leafs3()
		ruchang()
		})

		$('.choose_girl').on('click',function(){
			xingxiang = xingxiangnv;
			zhiwei = zhiweinv;
			$('.person').addClass('girl');
			$('.wrap').css({transform:'translateY('+-$(window).height()+'px)'})
		leafs1()
		leafs2()
		leafs3()
		ruchang()
		})

		var data = {
			zhong:[
				{
					question:'1·如果《大家》的文章每次被阅读一次，就给你一元，你现在是个什么级别的富人？',
					options:{
						A:'A·亿万富翁',
						B:'B·百万富翁',
						C:'C·穷光蛋'
					},
					correct:'A'
				},
				{
                   question:'2、NASH是什么？',
                   options:{
                       A:'A、一个数学家的名字',
                       B:'B、几个对博弈论最有贡献的人的名字合写',
                       C:'C、A+B'
                   },
                   correct:'C'
               },
                {
                   question:'3、以下文章标题，哪个被读者点击次数更多？',
                   options:{
                       A:'A、《这世上唯一能让窦唯潦倒的人》',
                       B:'B、《你无法证明自己不是人渣》',
                       C:'C、《崔永元用诡辩“战胜”科学》'
                   },
                   correct:'A'
               }
			],
			zhi:[
               {
					question:'1·如果《大家》的文章每次被阅读一次，就给你一元，你现在是个什么级别的富人？',
					options:{
						A:'A·亿万富翁',
						B:'B·百万富翁',
						C:'C·穷光蛋'
					},
					correct:'A'
				},
				{
                   question:'2、NASH是什么？',
                   options:{
                       A:'A、一个数学家的名字',
                       B:'B、几个对博弈论最有贡献的人的名字合写',
                       C:'C、A+B'
                   },
                   correct:'C'
               },
                {
                   question:'3、以下文章标题，哪个被读者点击次数更多？',
                   options:{
                       A:'A、《这世上唯一能让窦唯潦倒的人》',
                       B:'B、《你无法证明自己不是人渣》',
                       C:'C、《崔永元用诡辩“战胜”科学》'
                   },
                   correct:'A'
               }
           ],
           wen:[
               {
					question:'1·如果《大家》的文章每次被阅读一次，就给你一元，你现在是个什么级别的富人？',
					options:{
						A:'A·亿万富翁',
						B:'B·百万富翁',
						C:'C·穷光蛋'
					},
					correct:'A'
				},
				{
                   question:'2、NASH是什么？',
                   options:{
                       A:'A、一个数学家的名字',
                       B:'B、几个对博弈论最有贡献的人的名字合写',
                       C:'C、A+B'
                   },
                   correct:'C'
               },
                {
                   question:'3、以下文章标题，哪个被读者点击次数更多？',
                   options:{
                       A:'A、《这世上唯一能让窦唯潦倒的人》',
                       B:'B、《你无法证明自己不是人渣》',
                       C:'C、《崔永元用诡辩“战胜”科学》'
                   },
                   correct:'A'
               }
           ],
           xing:[
               {
					question:'1·如果《大家》的文章每次被阅读一次，就给你一元，你现在是个什么级别的富人？',
					options:{
						A:'A·亿万富翁',
						B:'B·百万富翁',
						C:'C·穷光蛋'
					},
					correct:'A'
				},
				{
                   question:'2、NASH是什么？',
                   options:{
                       A:'A、一个数学家的名字',
                       B:'B、几个对博弈论最有贡献的人的名字合写',
                       C:'C、A+B'
                   },
                   correct:'C'
               },
                {
                   question:'3、以下文章标题，哪个被读者点击次数更多？',
                   options:{
                       A:'A、《这世上唯一能让窦唯潦倒的人》',
                       B:'B、《你无法证明自己不是人渣》',
                       C:'C、《崔永元用诡辩“战胜”科学》'
                   },
                   correct:'A'
               }
           ],
           rui:[
               {
					question:'1·如果《大家》的文章每次被阅读一次，就给你一元，你现在是个什么级别的富人？',
					options:{
						A:'A·亿万富翁',
						B:'B·百万富翁',
						C:'C·穷光蛋'
					},
					correct:'A'
				},
				{
                   question:'2、NASH是什么？',
                   options:{
                       A:'A、一个数学家的名字',
                       B:'B、几个对博弈论最有贡献的人的名字合写',
                       C:'C、A+B'
                   },
                   correct:'C'
               },
                {
                   question:'3、以下文章标题，哪个被读者点击次数更多？',
                   options:{
                       A:'A、《这世上唯一能让窦唯潦倒的人》',
                       B:'B、《你无法证明自己不是人渣》',
                       C:'C、《崔永元用诡辩“战胜”科学》'
                   },
                   correct:'A'
               }
           ],
           renwu:[
               {
					question:'1·如果《大家》的文章每次被阅读一次，就给你一元，你现在是个什么级别的富人？',
					options:{
						A:'A·亿万富翁',
						B:'B·百万富翁',
						C:'C·穷光蛋'
					},
					correct:'A'
				},
				{
                   question:'2、NASH是什么？',
                   options:{
                       A:'A、一个数学家的名字',
                       B:'B、几个对博弈论最有贡献的人的名字合写',
                       C:'C、A+B'
                   },
                   correct:'C'
               },
                {
                   question:'3、以下文章标题，哪个被读者点击次数更多？',
                   options:{
                       A:'A、《这世上唯一能让窦唯潦倒的人》',
                       B:'B、《你无法证明自己不是人渣》',
                       C:'C、《崔永元用诡辩“战胜”科学》'
                   },
                   correct:'A'
               },
               {
					question:'4·如果《大家》的文章每次被阅读一次，就给你一元，你现在是个什么级别的富人？',
					options:{
						A:'A·亿万富翁',
						B:'B·百万富翁',
						C:'C·穷光蛋'
					},
					correct:'A'
				},
				{
                   question:'5、NASH是什么？',
                   options:{
                       A:'A、一个数学家的名字',
                       B:'B、几个对博弈论最有贡献的人的名字合写',
                       C:'C、A+B'
                   },
                   correct:'C'
               },
                {
                   question:'6、以下文章标题，哪个被读者点击次数更多？',
                   options:{
                       A:'A、《这世上唯一能让窦唯潦倒的人》',
                       B:'B、《你无法证明自己不是人渣》',
                       C:'C、《崔永元用诡辩“战胜”科学》'
                   },
                   correct:'A'
               },
               {
					question:'7·如果《大家》的文章每次被阅读一次，就给你一元，你现在是个什么级别的富人？',
					options:{
						A:'A·亿万富翁',
						B:'B·百万富翁',
						C:'C·穷光蛋'
					},
					correct:'A'
				},
				{
                   question:'8、NASH是什么？',
                   options:{
                       A:'A、一个数学家的名字',
                       B:'B、几个对博弈论最有贡献的人的名字合写',
                       C:'C、A+B'
                   },
                   correct:'C'
               },
                {
                   question:'9、以下文章标题，哪个被读者点击次数更多？',
                   options:{
                       A:'A、《这世上唯一能让窦唯潦倒的人》',
                       B:'B、《你无法证明自己不是人渣》',
                       C:'C、《崔永元用诡辩“战胜”科学》'
                   },
                   correct:'A'
               },
               {
                   question:'10、以下文章标题，哪个被读者点击次数更多？',
                   options:{
                       A:'A、《这世上唯一能让窦唯潦倒的人》',
                       B:'B、《你无法证明自己不是人渣》',
                       C:'C、《崔永元用诡辩“战胜”科学》'
                   },
                   correct:'A'
               }
           ],
		}
		var map_opt = {'0':'A','1':'B','2':'C'};
		var map_result_text = {'zhong':'忠匾','zhi':'屏风','wen':'宣纸','xing':'小猫','rui':'锐笔'}
		var result = 0;
		var answerCount = 0;
		var isfinished = false;
		function initData(daoju){
			var answerIndex = 0;
			// var isfinished = (answerCount==2)?true:false;
			answerIndex = answerCount;
			var newData = data[daoju];
			var length = newData.length;
			if(length==answerIndex+1) isfinished = true;
		$('.title').text(data[daoju][answerIndex]['question']);	
		$('.opt').each(function(index,item){
			var $item = $(item);
			var opt = data[daoju][answerIndex]['options'][map_opt[index]];
			$item.find('span').text(opt);
		});
		$('.result-options').data('correct',data[daoju][answerIndex]['correct'])
		$('.answer').data('daoju',daoju)
		}
		var totalPages;
		$('.ac_btn').on('click',function(){
			result = 0;
			answerCount = 0;
			isfinished = false;
			var $t = $(this);
			if($t.hasClass('current')) return;
			var daoju = $t.data('daoju');
				if(daoju == 'renwu'){
					totalPages = 10;
					$('.num-count').text(page+'/'+totalPages);
					}else{
					totalPages = 3;
					$('.num-count').text(page+'/'+totalPages);
						}
			initData(daoju);
		$('.wrap').css({transform:'translateY('+-$(window).height()*2+'px)'})
		
		
		})

	$('.share-btn').on('click',function(){

		$('.share').velocity('fadeIn')
			$('.sharebg').velocity('fadeIn')
			$('.sharebg').velocity('fadeOut',{complete:function(){
			$('.share').velocity('fadeOut');
			},delay:3000});
		
	})
		function success(daoju,$t,dom){
			$('.'+daoju).addClass('current');

			$t.find(dom).velocity('fadeIn',{complete:function(){
				lock = false;
					var $t = $(this);
					$t.velocity('fadeOut');
					$('.result-flag').attr('class','result-flag result-flag-'+daoju);
					$('.result-text').text('恭喜您获得 '+map_result_text[daoju]);
				$('.result').velocity('fadeIn',{complete:function(){
					var $t = $(this);
					$t.velocity('fadeOut',{complete:function(){
						pageLock = false;
						pageCount();
						$('.wrap').css({transform:'translateY('+-$(window).height()+'px)'});
						$('.main-'+daoju).velocity('fadeIn',{delay:500})	
					},delay:2000
				});
						
				},duration:3000
			})

				},duration:2000
			});
				
		}
		function failed($t,animationDom){
					$t.find(animationDom).velocity('fadeIn',{complete:function(){
					lock = false;
					var $t = $(this);
					$t.velocity('fadeOut');
				$('.result-wrong').velocity('fadeIn',{complete:function(){
					var $t = $(this);
					$t.velocity('fadeOut',{complete:function(){
						pageLock = false;
						pageCount();
						$('.wrap').css({transform:'translateY('+-$(window).height()+'px)'});	
					},delay:2000
				});
						
				},duration:3000
			})

				},duration:2000
			});	
				
		}
		function correctResult(daoju,$t){
			if(isfinished){
				if(result>=2){
				
			success(daoju,$t,'.animation-correct');
			}else{
				failed($t,'.animation-correct');
			}
		}else{
			$t.find('.animation-correct').velocity('fadeIn',{complete:function(){
				lock = false;
				$(this).velocity('fadeOut',{duration:1});
				
				initData(daoju);
				pageLock = false;
				pageCount();
			}})
			
			}
		}
		function wrongResult(daoju,$t){
			if(isfinished){
				if(result<2){
				
				failed($t,'.animation-wrong')

				}else{
				success(daoju,$t,'.animation-wrong')	
				}
			}else{
				$t.find('.animation-wrong').velocity('fadeIn',{complete:function(){
				$(this).velocity('fadeOut',{duration:1});
				lock = false;
				initData(daoju);
				pageLock = false;
				pageCount();
			}})
			}		
		}
			function correctResultRenwu(daoju,$t){
			if(isfinished){
				if(result>=2){
				
			successRenwu(daoju,$t,'.animation-correct');
			}else{
				failedRenwu($t,'.animation-correct');
			}
		}else{
			$t.find('.animation-correct').velocity('fadeIn',{complete:function(){
				lock = false;
				$(this).velocity('fadeOut',{duration:1});
				
				initData(daoju);
				pageLock = false;
				pageCount();
			}})
			
			}
		}
		function wrongResultRenwu(daoju,$t){
			if(isfinished){
				if(result<2){
				
				failedRenwu($t,'.animation-wrong')

				}else{
				successRenwu(daoju,$t,'.animation-wrong')	
				}
			}else{
				$t.find('.animation-wrong').velocity('fadeIn',{complete:function(){
				$(this).velocity('fadeOut',{duration:1});
				lock = false;
				initData(daoju);
				pageLock = false;
				pageCount();
			}})
			}		
		}

		function successRenwu(daoju,$t,dom){
			$('.'+daoju)
			$t.find(dom).velocity('fadeIn',{complete:function(){
				lock = false;
					var $t = $(this);
					$t.velocity('fadeOut');
					$('.result-person-title').text('答对'+result+'题');
					$('.reuslt-person-text').text(zhiwei[result]);
					for(var i=0;i<=10;i++){
				$('.person').removeClass(xingxiang[i]);
			}
					$('.person').addClass(xingxiang[result]);
					$('.fenghao').text(zhiwei[result]);
				$('.result-person').velocity('fadeIn',{complete:function(){
					var $t = $(this);
					$t.velocity('fadeOut',{complete:function(){
						pageLock = false;
						pageCount();
						$('.wrap').css({transform:'translateY('+-$(window).height()+'px)'});	
					},delay:2000
				});
						
				},duration:3000
			})

				},duration:2000
			});
				
		}
		var zhiwei;
		var xingxiang;
		var zhiweinan = ['太监','太监','衙役','衙役','县令','县令','宰相','宰相','皇帝','皇帝','皇帝']
		var xingxiangnan = ['boy','boy','yayi','yayi','xianling','xianling','zaixiang','zaixiang','haungdi','huangdi','huangdi']
		var zhiweinv = ['丫头','丫头','小姐','小姐','小主','小主','贵妃','贵妃','女皇','女皇','女皇']
		var xingxiangnv = ['girl','girl','xiaojie','xiaojie','xiaozhu','xiaozhu','guifei','guifei','nvwang','nvwang','nvwang']
		function failedRenwu($t,animationDom){
					$t.find(animationDom).velocity('fadeIn',{complete:function(){
					lock = false;
					var $t = $(this);
					$t.velocity('fadeOut');
				$('.result-person-title').text('答对'+result+'题');
				$('.reuslt-person-text').text(zhiwei[result]);
				for(var i=0;i<=10;i++){
				$('.person').removeClass(xingxiang[i]);
			}
				$('.person').addClass(xingxiang[result]);		
				$('.fenghao').text(zhiwei[result]);				
				$('.result-person').velocity('fadeIn',{complete:function(){
					var $t = $(this);
					$t.velocity('fadeOut',{complete:function(){
						pageLock = false;
						pageCount();
						$('.wrap').css({transform:'translateY('+-$(window).height()+'px)'});	
					},delay:2000
				});
						
				},duration:3000
			})

				},duration:2000
			});	
				
		}

		var lock = false;
		var page = 1;
		var pageLock = false;

		function pageCount(){

				if (page >= totalPages){
				page = 1
				$('.num-count').text(page+'/'+totalPages);
				}else{
			page++;		
			$('.num-count').text(page+'/'+totalPages);		
				}	
			}
			
		


		$('.opt').on('click',function(){

			if (lock) return;
			if (pageLock) return;
			lock = true;
			pageLock = true;
			answerCount++;
			var $t = $(this);
			var correct = $t.closest('.result-options').data('correct');
			var daoju = $t.closest('.answer').data('daoju')
			var choose_val = map_opt[$t.index()];
			if(daoju == "renwu"){
				if(choose_val == correct){
				result++;
				correctResultRenwu(daoju,$t);	
				}else{
			wrongResultRenwu(daoju,$t);		
				}
			}else{
			if(choose_val == correct){
				result++;
				correctResult(daoju,$t);	
				}else{
			wrongResult(daoju,$t);		
				}
			}
		})


	</script>
</body>
</html>